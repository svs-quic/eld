<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>13. LTO Support &mdash; ELD  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/index.css" type="text/css" />
      <link rel="stylesheet" href="/home/runner/work/eld/eld/obj/tools/eld/docs/userguide/source/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="14. Getting Image Details" href="getting_image_details.html" />
    <link rel="prev" title="12. Linker Optimization Features" href="linker_optimizations.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ELD
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="linker_overview.html">1. Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="linking_modes_supported.html">2. Supported Linking Modes</a></li>
<li class="toctree-l1"><a class="reference internal" href="supported_targets.html">3. Supported Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="linker_script.html">4. Linker Script</a></li>
<li class="toctree-l1"><a class="reference internal" href="linker_diagnostics.html">5. Diagnostics</a></li>
<li class="toctree-l1"><a class="reference internal" href="linker_support_backward_compatibility.html">6. Shared Library Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="linker_support_backward_compatibility.html#gnu-elf-symbol-versioning">7. GNU ELF Symbol Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="image_structure_and_generation.html">8. Image Structure and Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="linker_map_files.html">9. Linker Map Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout.html">10. Image layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="linker_plugins_updated.html">11. Linker Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="linker_optimizations.html">12. Linker Optimization Features</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">13. LTO Support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">13.1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#background-llvm-lto">13.2. Background: LLVM LTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="#eld-lto-model">13.3. ELD LTO model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#inputs">13.3.1. Inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#selecting-lto-inputs">13.3.2. Selecting LTO inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lto-phases-in-eld">13.3.3. LTO phases in ELD</a></li>
<li class="toctree-l3"><a class="reference internal" href="#linker-scripts-and-lto">13.3.4. Linker scripts and LTO</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lto-switch-reference">13.4. LTO switch reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#core-lto-enablement-and-input-selection">13.4.1. Core LTO enablement and input selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lto-output-control-and-artifacts">13.4.2. LTO output control and artifacts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lto-optimization-control">13.4.3. LTO optimization control</a></li>
<li class="toctree-l3"><a class="reference internal" href="#llvm-option-passthrough">13.4.4. LLVM option passthrough</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assembler-control">13.4.5. Assembler control</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lto-caching">13.4.6. LTO caching</a></li>
<li class="toctree-l3"><a class="reference internal" href="#symbol-preservation-and-ordering">13.4.7. Symbol preservation and ordering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#diagnostics-and-tracing">13.4.8. Diagnostics and tracing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#examples">13.5. Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#references">13.6. References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting_image_details.html">14. Getting Image Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="options/options.html">15. Command-line options</a></li>
<li class="toctree-l1"><a class="reference internal" href="target_specific_features.html">16. Target Specific Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="linker_faq.html">17. Linker support and frequently asked questions!!!</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ELD</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">13. </span>LTO Support</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="lto-support">
<h1><span class="section-number">13. </span>LTO Support<a class="headerlink" href="#lto-support" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id1">Overview</a></p></li>
<li><p><a class="reference internal" href="#background-llvm-lto" id="id2">Background: LLVM LTO</a></p></li>
<li><p><a class="reference internal" href="#eld-lto-model" id="id3">ELD LTO model</a></p>
<ul>
<li><p><a class="reference internal" href="#inputs" id="id4">Inputs</a></p></li>
<li><p><a class="reference internal" href="#selecting-lto-inputs" id="id5">Selecting LTO inputs</a></p></li>
<li><p><a class="reference internal" href="#lto-phases-in-eld" id="id6">LTO phases in ELD</a></p></li>
<li><p><a class="reference internal" href="#linker-scripts-and-lto" id="id7">Linker scripts and LTO</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#lto-switch-reference" id="id8">LTO switch reference</a></p>
<ul>
<li><p><a class="reference internal" href="#core-lto-enablement-and-input-selection" id="id9">Core LTO enablement and input selection</a></p></li>
<li><p><a class="reference internal" href="#lto-output-control-and-artifacts" id="id10">LTO output control and artifacts</a></p></li>
<li><p><a class="reference internal" href="#lto-optimization-control" id="id11">LTO optimization control</a></p></li>
<li><p><a class="reference internal" href="#llvm-option-passthrough" id="id12">LLVM option passthrough</a></p></li>
<li><p><a class="reference internal" href="#assembler-control" id="id13">Assembler control</a></p></li>
<li><p><a class="reference internal" href="#lto-caching" id="id14">LTO caching</a></p></li>
<li><p><a class="reference internal" href="#symbol-preservation-and-ordering" id="id15">Symbol preservation and ordering</a></p></li>
<li><p><a class="reference internal" href="#diagnostics-and-tracing" id="id16">Diagnostics and tracing</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#examples" id="id17">Examples</a></p></li>
<li><p><a class="reference internal" href="#references" id="id18">References</a></p></li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id1"><span class="section-number">13.1. </span>Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>ELD supports Link Time Optimization (LTO) using the LLVM LTO libraries. The
linker can consume LLVM bitcode directly or use embedded bitcode inside ELF
objects and drive Full LTO or ThinLTO code generation. This chapter describes
the LTO model used by ELD and the linker switches that control it.</p>
</div>
<div class="section" id="background-llvm-lto">
<h2><a class="toc-backref" href="#id2"><span class="section-number">13.2. </span>Background: LLVM LTO</a><a class="headerlink" href="#background-llvm-lto" title="Permalink to this heading"></a></h2>
<p>LLVM LTO performs intermodular (whole program) optimization at link time.
Compared to traditional per-object optimization, LTO enables cross-module
inlining, dead code elimination, and whole-program analysis by merging or
summarizing LLVM IR across inputs. The LLVM LTO design emphasizes transparency
in the build system: compile with LTO enabled and link with an LTO-capable
linker, and the linker handles optimization without special build steps.</p>
<p>ThinLTO is LLVM’s scalable LTO mode. It uses a summary index to avoid a full
merge of all IR, supports parallel code generation, and allows caching of
imported summaries or produced objects to speed up incremental builds. ELD
provides knobs for ThinLTO parallelism and caching, alongside Full LTO support
when modules are compiled for full LTO.</p>
</div>
<div class="section" id="eld-lto-model">
<h2><a class="toc-backref" href="#id3"><span class="section-number">13.3. </span>ELD LTO model</a><a class="headerlink" href="#eld-lto-model" title="Permalink to this heading"></a></h2>
<div class="section" id="inputs">
<h3><a class="toc-backref" href="#id4"><span class="section-number">13.3.1. </span>Inputs</a><a class="headerlink" href="#inputs" title="Permalink to this heading"></a></h3>
<p>ELD triggers LTO when it sees bitcode inputs or when it is instructed to use
embedded bitcode sections in ELF files:</p>
<ul class="simple">
<li><p><strong>Bitcode inputs</strong>: <cite>.bc</cite> inputs are always treated as LTO inputs.</p></li>
<li><p><strong>Embedded bitcode</strong>: ELD recognizes the <cite>.llvmbc</cite> section in ELF objects and
can replace the native object with the embedded bitcode when LTO is enabled.
This supports “fat” objects that carry both native code and LLVM bitcode.</p></li>
</ul>
</div>
<div class="section" id="selecting-lto-inputs">
<h3><a class="toc-backref" href="#id5"><span class="section-number">13.3.2. </span>Selecting LTO inputs</a><a class="headerlink" href="#selecting-lto-inputs" title="Permalink to this heading"></a></h3>
<p>LTO is enabled in two ways:</p>
<ul class="simple">
<li><p><cite>-flto</cite> enables LTO if any bitcode input or embedded bitcode is present.</p></li>
<li><p><cite>–include-lto-filelist</cite> can be used without <cite>-flto</cite> to select which
ELF inputs with embedded bitcode should be upgraded to LTO inputs.</p></li>
</ul>
<p>When <cite>-flto</cite> is used, embedded bitcode is used by default unless excluded using
<cite>–exclude-lto-filelist</cite>. When <cite>-flto</cite> is not used, only file patterns listed
in <cite>–include-lto-filelist</cite> are upgraded to LTO inputs.</p>
<p>File lists accept one glob pattern per line (wildcards <cite>*</cite>, <cite>?</cite>, and <cite>[]</cite> are
supported). Patterns are matched against the input path as seen by the linker.</p>
</div>
<div class="section" id="lto-phases-in-eld">
<h3><a class="toc-backref" href="#id6"><span class="section-number">13.3.3. </span>LTO phases in ELD</a><a class="headerlink" href="#lto-phases-in-eld" title="Permalink to this heading"></a></h3>
<p>ELD performs LTO in distinct phases:</p>
<ol class="arabic simple">
<li><p><strong>Pre-LTO</strong>: Inputs are read, symbols are collected, and linker scripts are
evaluated. Bitcode inputs are registered for LTO.</p></li>
<li><p><strong>LTO</strong>: LLVM performs symbol resolution across bitcode modules and emits
native object files (Full LTO) or partitioned outputs (ThinLTO).</p></li>
<li><p><strong>Post-LTO</strong>: The generated objects are inserted back into the link and
linked like normal ELF objects. Map files can include pre-LTO and post-LTO
details.</p></li>
</ol>
</div>
<div class="section" id="linker-scripts-and-lto">
<h3><a class="toc-backref" href="#id7"><span class="section-number">13.3.4. </span>Linker scripts and LTO</a><a class="headerlink" href="#linker-scripts-and-lto" title="Permalink to this heading"></a></h3>
<p>ELD supports LTO with linker scripts. When a script uses <cite>SECTIONS</cite> ordering,
ELD preserves input order for LTO-generated sections. If you need to disable
this ordering for performance or to match non-script ordering, use
<cite>-flto-options=disable-linkorder</cite>.</p>
</div>
</div>
<div class="section" id="lto-switch-reference">
<h2><a class="toc-backref" href="#id8"><span class="section-number">13.4. </span>LTO switch reference</a><a class="headerlink" href="#lto-switch-reference" title="Permalink to this heading"></a></h2>
<p>This section lists the LTO-related switches supported by ELD. Some switches
also accept <cite>–plugin-opt=…</cite> aliases for compatibility with LLVMgold and lld.</p>
<div class="section" id="core-lto-enablement-and-input-selection">
<h3><a class="toc-backref" href="#id9"><span class="section-number">13.4.1. </span>Core LTO enablement and input selection</a><a class="headerlink" href="#core-lto-enablement-and-input-selection" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><cite>-flto</cite> or <cite>–flto</cite>
Enable LTO if a bitcode file or embedded bitcode section is present.</p></li>
<li><p><cite>–include-lto-filelist=&lt;list&gt;</cite>
Use this list to select which ELF inputs with embedded bitcode should be
used for LTO when <cite>-flto</cite> is not present.</p></li>
<li><p><cite>–exclude-lto-filelist=&lt;list&gt;</cite>
Use this list to exclude embedded bitcode inputs when <cite>-flto</cite> is present.</p></li>
</ul>
</div>
<div class="section" id="lto-output-control-and-artifacts">
<h3><a class="toc-backref" href="#id10"><span class="section-number">13.4.2. </span>LTO output control and artifacts</a><a class="headerlink" href="#lto-output-control-and-artifacts" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><cite>–save-temps</cite>
Save intermediate LTO artifacts. Temporary files use the prefix
<cite>&lt;output&gt;.llvm-lto.*</cite>.</p></li>
<li><p><cite>–save-temps=&lt;dir&gt;</cite>
Save LTO temporary files under the specified directory.</p></li>
<li><p><cite>–lto-emit-asm</cite>
Run LTO and emit assembly only. No final link is performed. Output files use
the prefix <cite>&lt;output&gt;.llvm-lto.&lt;task&gt;.s</cite>.
Alias: <cite>–plugin-opt=emit-asm</cite>.</p></li>
<li><p><cite>–lto-emit-llvm</cite>
Run LTO and emit LLVM bitcode to the final output file (<cite>-o</cite>). No final link
is performed.
Alias: <cite>–plugin-opt=emit-llvm</cite>.</p></li>
<li><p><cite>–lto-obj-path=&lt;prefix&gt;</cite>
Prefix for LTO-generated object files. When provided, output objects are not
deleted after LTO.
Alias: <cite>–plugin-opt=obj-path=</cite>.</p></li>
<li><p><cite>-flto-options=lto-asm-file=&lt;file[,file2,…]&gt;</cite>
Use pre-generated LTO assembly files as inputs to the external assembler.</p></li>
<li><p><cite>-flto-options=lto-output-file=&lt;file[,file2,…]&gt;</cite>
Use pre-generated LTO object files as outputs (bypasses LTO code generation).</p></li>
</ul>
</div>
<div class="section" id="lto-optimization-control">
<h3><a class="toc-backref" href="#id11"><span class="section-number">13.4.3. </span>LTO optimization control</a><a class="headerlink" href="#lto-optimization-control" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><cite>–lto-O=&lt;level&gt;</cite>
Set the LTO optimization level (0-4).
Alias: <cite>–plugin-opt=O</cite>.</p></li>
<li><p><cite>–lto-partitions=&lt;number&gt;</cite>
Set the number of code generation partitions.
Alias: <cite>–plugin-opt=lto-partitions=</cite>.</p></li>
<li><p><cite>–thinlto-jobs=&lt;number&gt;</cite>
Set the number of ThinLTO backend jobs. Overrides <cite>–threads=</cite> for ThinLTO.
Alias: <cite>–plugin-opt=jobs=</cite>.</p></li>
<li><p><cite>–lto-sample-profile=&lt;file&gt;</cite>
Provide a sample PGO profile for LTO.
Alias: <cite>–plugin-opt=sample-profile=</cite>.</p></li>
<li><p><cite>–lto-cs-profile-generate</cite>
Enable context-sensitive PGO instrumentation during LTO.
Alias: <cite>–plugin-opt=cs-profile-generate</cite>.</p></li>
<li><p><cite>–lto-cs-profile-file=&lt;file&gt;</cite>
Provide a context-sensitive profile for LTO.
Alias: <cite>–plugin-opt=cs-profile-path=</cite>.</p></li>
<li><p><cite>–lto-debug-pass-manager</cite>
Enable debug output for the new pass manager.
Alias: <cite>–plugin-opt=debug-pass-manager</cite>.</p></li>
<li><p><cite>–disable-verify</cite>
Disable the LLVM IR verifier in the LTO pipeline.
Alias: <cite>–plugin-opt=disable-verify</cite>.</p></li>
<li><p><cite>–dwodir=&lt;dir&gt;</cite>
Directory for split DWARF <cite>.dwo</cite> files generated during LTO.</p></li>
</ul>
</div>
<div class="section" id="llvm-option-passthrough">
<h3><a class="toc-backref" href="#id12"><span class="section-number">13.4.4. </span>LLVM option passthrough</a><a class="headerlink" href="#llvm-option-passthrough" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><cite>–plugin-opt=-&lt;llvm-option&gt;</cite>
Pass a raw LLVM option to LTO (LLVMgold compatibility). For example,
<cite>–plugin-opt=-debug-pass-manager</cite>.</p></li>
<li><p><cite>-flto-options=codegen=&lt;llvm-arg&gt;</cite>
Pass LLVM codegen options to LTO (supports <cite>-O</cite>, <cite>-mcpu=</cite>, <cite>-mattr=</cite>, and
arbitrary LLVM options).</p></li>
<li><p><cite>-flto-options=&lt;string&gt;</cite>
Passes additional LTO plugin options through. For example, tests use
<cite>-flto-options=no-merge-modules</cite> and <cite>-flto-options=codegen=-split-lto-cg</cite>.</p></li>
</ul>
</div>
<div class="section" id="assembler-control">
<h3><a class="toc-backref" href="#id13"><span class="section-number">13.4.5. </span>Assembler control</a><a class="headerlink" href="#assembler-control" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><cite>-flto-use-as</cite>
Use the external assembler instead of the integrated assembler for LTO.</p></li>
<li><p><cite>-flto-options=asmopts=&lt;arg&gt;</cite>
Extra arguments passed to the external assembler during LTO.</p></li>
</ul>
</div>
<div class="section" id="lto-caching">
<h3><a class="toc-backref" href="#id14"><span class="section-number">13.4.6. </span>LTO caching</a><a class="headerlink" href="#lto-caching" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><cite>-flto-options=cache</cite>
Enable ThinLTO caching. By default, cache output is written to
<cite>&lt;output&gt;.ltocache</cite>.</p></li>
<li><p><cite>-flto-options=cache=&lt;dir&gt;</cite>
Enable ThinLTO caching using the specified directory.</p></li>
</ul>
</div>
<div class="section" id="symbol-preservation-and-ordering">
<h3><a class="toc-backref" href="#id15"><span class="section-number">13.4.7. </span>Symbol preservation and ordering</a><a class="headerlink" href="#symbol-preservation-and-ordering" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><cite>-flto-options=preserveall</cite>
Preserve all bitcode symbols during LTO.</p></li>
<li><p><cite>-flto-options=preserve-sym=&lt;sym1,sym2,…&gt;</cite>
Preserve the specified symbols in LTO.</p></li>
<li><p><cite>-flto-options=preserve-file=&lt;file&gt;</cite>
Preserve the symbols listed in the given file (one symbol per line).</p></li>
<li><p><cite>-flto-options=disable-linkorder</cite>
Disable link order enforcement when linker scripts are present.</p></li>
<li><p><cite>-flto-options=verbose</cite>
Enable verbose LTO diagnostics and trace output.</p></li>
</ul>
</div>
<div class="section" id="diagnostics-and-tracing">
<h3><a class="toc-backref" href="#id16"><span class="section-number">13.4.8. </span>Diagnostics and tracing</a><a class="headerlink" href="#diagnostics-and-tracing" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><cite>–trace-lto</cite>
Trace LTO stages and emit additional diagnostics.</p></li>
<li><p><cite>–opt-record-file</cite>
Emit LTO optimization remarks. ELD writes <cite>-LTO.opt.yaml</cite> alongside the
output file.</p></li>
<li><p><cite>–display-hotness</cite>
Display hotness information with optimization remarks.</p></li>
<li><p><cite>–print-timing-stats</cite>, <cite>–emit-timing-stats</cite>
Emit or print timing stats, including LTO phases.</p></li>
</ul>
</div>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id17"><span class="section-number">13.5. </span>Examples</a><a class="headerlink" href="#examples" title="Permalink to this heading"></a></h2>
<p>Full LTO with embedded bitcode:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">clang</span><span class="w"> </span><span class="o">-</span><span class="n">flto</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">o</span>
<span class="n">clang</span><span class="w"> </span><span class="o">-</span><span class="n">flto</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">bar</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">bar</span><span class="p">.</span><span class="n">o</span>
<span class="n">ld</span><span class="p">.</span><span class="n">eld</span><span class="w"> </span><span class="o">-</span><span class="n">flto</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">bar</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">app</span><span class="p">.</span><span class="n">elf</span>
</pre></div>
</div>
<p>ThinLTO with parallel backends and cache:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">clang</span><span class="w"> </span><span class="o">-</span><span class="n">flto</span><span class="o">=</span><span class="n">thin</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">o</span>
<span class="n">clang</span><span class="w"> </span><span class="o">-</span><span class="n">flto</span><span class="o">=</span><span class="n">thin</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">bar</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">bar</span><span class="p">.</span><span class="n">o</span>
<span class="n">ld</span><span class="p">.</span><span class="n">eld</span><span class="w"> </span><span class="o">-</span><span class="n">flto</span><span class="w"> </span><span class="o">--</span><span class="n">thinlto</span><span class="o">-</span><span class="n">jobs</span><span class="o">=</span><span class="mi">8</span><span class="w"> </span><span class="o">--</span><span class="n">flto</span><span class="o">-</span><span class="n">options</span><span class="o">=</span><span class="n">cache</span><span class="o">=</span><span class="n">thinlto</span><span class="p">.</span><span class="n">cache</span><span class="w"> </span>\
<span class="w">  </span><span class="n">foo</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">bar</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">app</span><span class="p">.</span><span class="n">elf</span>
</pre></div>
</div>
<p>Selective LTO on a subset of objects:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp"># lto_list.txt contains glob patterns like:</span>
<span class="cp">#   libfoo/*.o</span>
<span class="cp">#   *vector_math*.o</span>
<span class="n">ld</span><span class="p">.</span><span class="n">eld</span><span class="w"> </span><span class="o">--</span><span class="n">include</span><span class="o">-</span><span class="n">lto</span><span class="o">-</span><span class="n">filelist</span><span class="o">=</span><span class="n">lto_list</span><span class="p">.</span><span class="n">txt</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">bar</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">app</span><span class="p">.</span><span class="n">elf</span>
</pre></div>
</div>
<p>Emit LTO assembly for inspection:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ld</span><span class="p">.</span><span class="n">eld</span><span class="w"> </span><span class="o">-</span><span class="n">flto</span><span class="w"> </span><span class="o">--</span><span class="n">lto</span><span class="o">-</span><span class="n">emit</span><span class="o">-</span><span class="k">asm</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">bar</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">app</span><span class="p">.</span><span class="n">elf</span>
<span class="cp"># Output files: app.elf.llvm-lto.0.s, app.elf.llvm-lto.1.s, ...</span>
</pre></div>
</div>
</div>
<div class="section" id="references">
<h2><a class="toc-backref" href="#id18"><span class="section-number">13.6. </span>References</a><a class="headerlink" href="#references" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>LLVM Link Time Optimization: Design and Implementation
(<cite>https://llvm.org/docs/LinkTimeOptimization.html</cite>)</p></li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="linker_optimizations.html" class="btn btn-neutral float-left" title="12. Linker Optimization Features" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="getting_image_details.html" class="btn btn-neutral float-right" title="14. Getting Image Details" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Qualcomm Technologies, Inc. All rights reserved..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>